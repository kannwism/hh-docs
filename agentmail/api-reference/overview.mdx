---
title: "API Reference"
description: "Complete API documentation for AgentMail"
---

## Overview

The AgentMail API is a RESTful API that allows you to programmatically manage email inboxes, send and receive messages, and automate email workflows for your AI agents.

## Base URL

All API requests should be made to:

```
https://api.agentmail.to/v1
```

## Authentication

Authenticate your requests using an API key in the Authorization header:

```bash
curl https://api.agentmail.to/v1/inboxes \
  -H "Authorization: Bearer YOUR_API_KEY"
```

<Note>
  Get your API key from the [AgentMail dashboard](https://dashboard.agentmail.to/api-keys).
</Note>

### API Key Security

<Warning>
  Never expose your API key in client-side code or public repositories!
</Warning>

Best practices:
- Store API keys in environment variables
- Use different keys for development and production
- Rotate keys regularly
- Revoke compromised keys immediately

## Request Format

The API accepts JSON-encoded request bodies:

```bash
curl -X POST https://api.agentmail.to/v1/inboxes \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "My Agent Inbox"
  }'
```

## Response Format

All responses are returned as JSON:

```json
{
  "id": "inbox_abc123",
  "email": "agent-abc123@mail.agentmail.to",
  "name": "My Agent Inbox",
  "status": "active",
  "created_at": "2024-01-15T10:30:00Z"
}
```

## HTTP Status Codes

The API uses standard HTTP status codes:

| Code | Description |
|------|-------------|
| `200` | Success |
| `201` | Resource created successfully |
| `204` | Success with no content |
| `400` | Bad request - invalid parameters |
| `401` | Unauthorized - invalid API key |
| `403` | Forbidden - insufficient permissions |
| `404` | Resource not found |
| `429` | Too many requests - rate limit exceeded |
| `500` | Internal server error |

## Error Handling

Error responses include details about what went wrong:

```json
{
  "error": {
    "code": "invalid_request",
    "message": "The 'to' field is required",
    "param": "to",
    "type": "validation_error"
  }
}
```

### Common Error Types

<AccordionGroup>
  <Accordion icon="triangle-exclamation" title="validation_error">
    Invalid parameters in the request. Check the `param` field to identify the issue.
  </Accordion>

  <Accordion icon="key" title="authentication_error">
    Invalid or missing API key. Verify your Authorization header.
  </Accordion>

  <Accordion icon="ban" title="permission_error">
    Insufficient permissions for the requested action.
  </Accordion>

  <Accordion icon="magnifying-glass" title="not_found">
    The requested resource doesn't exist.
  </Accordion>

  <Accordion icon="gauge-high" title="rate_limit_error">
    Too many requests. Wait before retrying.
  </Accordion>
</AccordionGroup>

## Rate Limits

API requests are rate limited to ensure fair usage:

| Plan | Rate Limit |
|------|------------|
| Free | 100 requests/minute |
| Pro | 1,000 requests/minute |
| Enterprise | 10,000 requests/minute |

Rate limit headers are included in responses:

```
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 987
X-RateLimit-Reset: 1642334400
```

## Pagination

List endpoints return paginated results:

```bash
curl "https://api.agentmail.to/v1/messages?limit=50&offset=100" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

Parameters:
- `limit`: Number of items per page (max 100, default 25)
- `offset`: Number of items to skip (default 0)

Response includes pagination metadata:

```json
{
  "data": [...],
  "has_more": true,
  "total_count": 523,
  "limit": 50,
  "offset": 100
}
```

## Filtering

Many endpoints support filtering with query parameters:

```bash
# Filter messages by sender
curl "https://api.agentmail.to/v1/messages?from=user@example.com" \
  -H "Authorization: Bearer YOUR_API_KEY"

# Filter by label
curl "https://api.agentmail.to/v1/messages?label=urgent" \
  -H "Authorization: Bearer YOUR_API_KEY"

# Filter by date range
curl "https://api.agentmail.to/v1/messages?created_after=2024-01-01&created_before=2024-01-31" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

## Idempotency

Prevent duplicate operations by including an idempotency key:

```bash
curl -X POST https://api.agentmail.to/v1/messages \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -H "Idempotency-Key: unique-key-123" \
  -d '{
    "inbox_id": "inbox_abc123",
    "to": ["user@example.com"],
    "subject": "Important Message",
    "body": "This will only be sent once, even if retried."
  }'
```

If you retry with the same idempotency key within 24 hours, you'll get the original response without creating a duplicate.

## Versioning

The API version is included in the URL path:

```
https://api.agentmail.to/v1/...
```

We maintain backward compatibility within major versions. Breaking changes will result in a new version (v2, v3, etc.).

## Core Resources

<CardGroup cols={2}>
  <Card
    title="Inboxes"
    icon="inbox"
    href="/agentmail/core-features/inboxes"
  >
    Create and manage email inboxes
  </Card>

  <Card
    title="Messages"
    icon="envelope"
    href="/agentmail/core-features/messages"
  >
    Send and receive email messages
  </Card>

  <Card
    title="Threads"
    icon="comments"
    href="/agentmail/core-features/threads"
  >
    Manage conversation threads
  </Card>

  <Card
    title="Drafts"
    icon="pen-to-square"
    href="/agentmail/core-features/drafts"
  >
    Create and manage email drafts
  </Card>

  <Card
    title="Labels"
    icon="tag"
    href="/agentmail/core-features/labels"
  >
    Organize with custom labels
  </Card>

  <Card
    title="Attachments"
    icon="paperclip"
    href="/agentmail/core-features/attachments"
  >
    Handle file attachments
  </Card>
</CardGroup>

## Advanced Features

<CardGroup cols={2}>
  <Card
    title="Webhooks"
    icon="webhook"
    href="/agentmail/advanced/webhooks"
  >
    Event-driven notifications
  </Card>

  <Card
    title="Custom Domains"
    icon="globe"
    href="/agentmail/advanced/custom-domains"
  >
    Use your own email domain
  </Card>

  <Card
    title="Pods"
    icon="users"
    href="/agentmail/advanced/pods"
  >
    Multi-tenant isolation
  </Card>
</CardGroup>

## SDKs and Libraries

Official SDKs are available for popular languages:

<Tabs>
  <Tab title="JavaScript/Node.js">
    ```bash
    npm install @agentmail/node
    ```

    ```javascript
    const AgentMail = require('@agentmail/node');
    const client = new AgentMail('YOUR_API_KEY');

    // Create an inbox
    const inbox = await client.inboxes.create({
      name: 'My Agent'
    });

    // Send a message
    await client.messages.create({
      inbox_id: inbox.id,
      to: ['user@example.com'],
      subject: 'Hello!',
      body: 'This is a test email.'
    });
    ```
  </Tab>

  <Tab title="Python">
    ```bash
    pip install agentmail
    ```

    ```python
    import agentmail

    client = agentmail.Client('YOUR_API_KEY')

    # Create an inbox
    inbox = client.inboxes.create(
        name='My Agent'
    )

    # Send a message
    client.messages.create(
        inbox_id=inbox.id,
        to=['user@example.com'],
        subject='Hello!',
        body='This is a test email.'
    )
    ```
  </Tab>

  <Tab title="Go">
    ```bash
    go get github.com/agentmail/agentmail-go
    ```

    ```go
    package main

    import (
        "github.com/agentmail/agentmail-go"
    )

    func main() {
        client := agentmail.NewClient("YOUR_API_KEY")

        // Create an inbox
        inbox, _ := client.Inboxes.Create(&agentmail.InboxParams{
            Name: "My Agent",
        })

        // Send a message
        client.Messages.Create(&agentmail.MessageParams{
            InboxID: inbox.ID,
            To:      []string{"user@example.com"},
            Subject: "Hello!",
            Body:    "This is a test email.",
        })
    }
    ```
  </Tab>

  <Tab title="Ruby">
    ```bash
    gem install agentmail
    ```

    ```ruby
    require 'agentmail'

    client = AgentMail::Client.new('YOUR_API_KEY')

    # Create an inbox
    inbox = client.inboxes.create(
      name: 'My Agent'
    )

    # Send a message
    client.messages.create(
      inbox_id: inbox.id,
      to: ['user@example.com'],
      subject: 'Hello!',
      body: 'This is a test email.'
    )
    ```
  </Tab>
</Tabs>

## Code Examples

### Create and Use an Inbox

```javascript
// Create inbox
const inbox = await fetch('https://api.agentmail.to/v1/inboxes', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: 'Support Agent'
  })
}).then(r => r.json());

// Send email
await fetch('https://api.agentmail.to/v1/messages', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    inbox_id: inbox.id,
    to: ['customer@example.com'],
    subject: 'Welcome!',
    body: 'Thanks for signing up.'
  })
});
```

### Handle Incoming Emails

```javascript
app.post('/webhooks/agentmail', async (req, res) => {
  const event = req.body;

  if (event.type === 'message.received') {
    const message = event.data;

    // Process the message
    await processIncomingEmail(message);

    // Send auto-reply
    await fetch('https://api.agentmail.to/v1/messages', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        inbox_id: message.inbox_id,
        to: [message.from],
        subject: `Re: ${message.subject}`,
        body: 'Thanks for your email!',
        thread_id: message.thread_id
      })
    });
  }

  res.status(200).send('OK');
});
```

## Testing

### Sandbox Mode

Test your integration without sending real emails:

```bash
curl -X POST https://api.agentmail.to/v1/messages \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -H "X-AgentMail-Sandbox: true" \
  -d '{
    "inbox_id": "inbox_abc123",
    "to": ["test@example.com"],
    "subject": "Test Email",
    "body": "This will not actually be sent."
  }'
```

### Test Endpoints

```bash
# Check API connectivity
curl https://api.agentmail.to/v1/health

# Verify API key
curl https://api.agentmail.to/v1/verify \
  -H "Authorization: Bearer YOUR_API_KEY"
```

## Support

<CardGroup cols={2}>
  <Card
    title="API Status"
    icon="signal"
    href="https://status.agentmail.to"
  >
    Check current API status and uptime
  </Card>

  <Card
    title="Discord Community"
    icon="discord"
    href="https://discord.gg/agentmail"
  >
    Get help from the community
  </Card>

  <Card
    title="Email Support"
    icon="envelope"
    href="mailto:support@agentmail.to"
  >
    Contact our support team
  </Card>

  <Card
    title="GitHub Issues"
    icon="github"
    href="https://github.com/agentmail/issues"
  >
    Report bugs and request features
  </Card>
</CardGroup>
